<% layout("layouts/boilerplate") %>

    <h1>
        <%= day.name %>
    </h1>
    <div class="row">
        <h3 class="col-md-4">
            Event: <%= event.name %>
        </h3>
        <h4 class="col-md-8">
            Gender: <%= event.gender %>
        </h4>
    </div>
    <div>
        <% if(event.participants.length> 0) { %>
            <h4 class="card-text">Participants - <%= event.participants.length %>: </h4>
            <ul class="list-group mb-2">
                <% for(let participant of event.participants) { %>
                    <li class="list-group-item list-group-item-action d-flex flex-wrap justify-content-between mb-1">
                        <div class="m-2 m-md-0">
                            Name: <%= participant.name %>
                        </div>
                        <div class="m-2 m-md-0">
                            House: <%= participant.house %>
                        </div>
                        <form
                            action="/sportsDays/<%= day._id %>/events/<%= event._id %>/<%= participant._id %>?_method=DELETE"
                            method="POST" class="m-2 m-md-0">
                            <button class="btn btn-danger btn-sm ml-auto">Remove</button>
                        </form>
                    </li>
                    <% } %>
            </ul>
            <% } else { %>
                <div class="mb-3 fs-2">No participants yet!</div>
                <% } %>
    </div>

    <form action="/sportsDays/<%= day._id %>/events/<%= event._id %>" method="POST" novalidate class="validated-form">
        <h4>Sign up:</h4>
        <div class="row">
            <div class="col-md-6 mb-3">
                <label class="form-label" for="name">Name</label>
                <input class="form-control" type="text" name="name" id="name" placeholder="Enter your name" required>
                <div class="valid-feedback">All Good!</div>
                <div class="invalid-feedback">Please choose a valid name.</div>
            </div>
            <div class="col-md-6 mb-3">
                <label class="form-label" for="Gender">House</label>
                <select name="house" class="form-select form-select-md" aria-label=".form-select-sm example" required>
                    <option value="Bear" selected>Bear</option>
                    <option value="Bison">Bison</option>
                    <option value="Lynx">Lynx</option>
                    <option value="Wolf">Wolf</option>
                </select>
                <div class="valid-feedback">All Good!</div>
                <div class="invalid-feedback">Please choose a valid house.</div>
            </div>
        </div>
        <div class="mb-3">
            <button class="btn btn-success">Sign Up</button>
        </div>
    </form>

    <div class="row mb-3">
        <form class="col-auto" action="/sportsDays/<%= day._id %>/events/<%= event._id %>?_method=DELETE" method="POST">
            <button class="btn btn-danger">Delete Event</button>
        </form>

        <form class="col-auto" action="/sportsDays/<%= day._id %>">
            <button class="btn btn-primary">Back to <%= day.name %></button>
        </form>
    </div>